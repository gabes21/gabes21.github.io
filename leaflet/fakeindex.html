<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Tutorial</title>

    <link rel="stylesheet" href="./css/styles.css" type="text/css" />

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

     <!-- Leaflet Javascript -->
     <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

     <!-- Leaflet Draw Plugin -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.js"></script>

    <!-- Jquery Plugin -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

    <!--Leaflet-Ajax-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js" integrity="sha512-Abr21JO2YqcJ03XGZRPuZSWKBhJpUAR6+2wH5zBeO4wAw4oksr8PRdF+BKIRsxvCdq+Mv4670rZ+dLnIyabbGw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>
    <div id="cont">
        <div id="map"></div>
        <button onclick="changeUrl()" type="button" id="pushMe">Change floor</button>
    </div>
</body>
</html>

<script>

  var buildingStyle = {
    fillColor: 'purple',
    color: '#ffffff'
  }

  var style = {
      fillColor: 'green',
      fillOpacity: 0.5,
      weight: 2,
      opacity: 1,
      color: '#ffffff',
      dashArray: '3'
  };

  var highlight = {
      'fillColor': 'yellow',
      'weight': 2,
      'opacity': 1
  };

  function forEachFeature(feature, layer) {
      layer.on("click", function (e) { 
          stateLayer.setStyle(style); //resets layer colors
          layer.setStyle(highlight);  //highlights selected.
      }); 
  }

  var stateLayer = L.geoJson(null, {onEachFeature: forEachFeature, style: style});
  var buildingLayer = new L.GeoJSON.AJAX('./build.geojson', {style: buildingStyle});

  var url = './ff1.geojson';

  function changeUrl() {
      url = './build.geojson';
      $.getJSON(url, function(data) {
          stateLayer.clearLayers(); 
          stateLayer.addData(data); 
          map.fitBounds(stateLayer.getBounds()); 
      });
  }

  var map = L.map('map').setView([0, 0], 2);
  buildingLayer.addTo(map);
  var polybound;

  $.getJSON(url, function(data) {
      stateLayer.addData(data);
      polybound = stateLayer.getBounds();
      map.setMaxBounds(polybound);

      map.on('drag', function() {
          map.panInsideBounds(polybound, { animate: false });
      });

      stateLayer.addTo(map);
      map.fitBounds(polybound);
  });
</script>